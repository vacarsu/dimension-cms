!function(e){function t(t){for(var i,o,s=t[0],a=t[1],l=t[2],m=0,p=[];m<s.length;m++)o=s[m],r[o]&&p.push(r[o][0]),r[o]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);for(c&&c(t);p.length;)p.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],i=!0,s=1;s<n.length;s++){var a=n[s];0!==r[a]&&(i=!1)}i&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={4:0},u=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var u,s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(e){return o.p+""+({}[e]||e)+".js"}(e),u=function(t){a.onerror=a.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),u=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+u+")");o.type=i,o.request=u,n[1](o)}r[e]=void 0}};var l=setTimeout(function(){u({type:"timeout",target:a})},12e4);a.onerror=a.onload=u,s.appendChild(a)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=a;u.push([16,2]),n()}({16:function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(0),u=n(15),o=n(111),s=n(271),a=(n(28),n(25),n(24),n(23),n(22),n(21),n(20),n(18),n(5)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.c(t,e),t.prototype.render=function(){return r.createElement(a.n,{direction:"column"},r.createElement(a.k,{style:{width:"100%",paddingLeft:"0",paddingRight:"0"},size:"expand"},r.createElement(a.l,{type:"image",src:"/dimension-cms/client/images/background.jpeg"})),r.createElement(a.F,{size:"default",padding:!0},r.createElement(a.k,null,r.createElement(a.n,{alignment:"center",direction:"row"},r.createElement(a.x,{type:"divider"},r.createElement(a.y,null,r.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Praesent mauris. Fusce nec tellus sed augue semper porta. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Sed dignissim lacinia nunc. ")),r.createElement(a.y,null,r.createElement("p",null,"Curabitur tortor. Pellentesque nibh. ",r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. ",r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. ")),r.createElement(a.y,null,r.createElement("p",null,r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Quisque volutpat condimentum velit. ",r.createElement("i",null,"Sed dignissim lacinia nunc"),". Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. ",r.createElement("b",null,"Proin ut ligula vel nunc egestas porttitor"),". Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet. Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus magna. ")),r.createElement(a.y,null,r.createElement("p",null,"Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. ",r.createElement("b",null,"Suspendisse in justo eu magna luctus suscipit"),". Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. ",r.createElement("b",null,"Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui"),". Nulla facilisi. Integer lacinia sollicitudin massa. ")))))))},t}(r.Component);document.addEventListener("DOMContentLoaded",function(){Object(u.render)(r.createElement(c,null),document.getElementById("root"))},!1);var c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!0,isLoadingRouteModules:!0,modules:null,packages:null,moduleRoutes:[]},n}return i.c(t,e),t.prototype.componentWillMount=function(){this.setup()},t.prototype.render=function(){return r.createElement(s.a,null,r.createElement(r.Fragment,null,r.createElement(o.a,{exact:!0,path:"/",component:l}),r.createElement("div",null,this.state.isLoadingRouteModules?"":this.renderRoutes())))},t.prototype.renderRoutes=function(){if(!this.state.isLoadingRouteModules)return this.state.moduleRoutes.map(function(e){var t=e.component;return console.log(e),r.createElement(o.a,{exact:e.route.exact,path:e.route.path,component:t})})},t.prototype.setup=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r,u,o,s,a,l,c,m;return i.d(this,function(i){switch(i.label){case 0:return[4,this.fetchPackages()];case 1:for(r in e=i.sent(),localStorage.setItem("packages",JSON.stringify(e)),t=[],n=[],e)n.push(r);u=0,i.label=2;case 2:if(!(u<n.length))return[3,7];for(a in o=n[u],s=[],e[o].modules)s.push(a);l=0,i.label=3;case 3:return l<s.length?(c=s[l],[4,this.fetchPackageModule(o,c)]):[3,6];case 4:m=i.sent(),t.push({module:m,packageName:o,type:c}),i.label=5;case 5:return l++,[3,3];case 6:return u++,[3,2];case 7:return this.setState({packages:e,modules:t,isLoading:!1}),localStorage.setItem("modules",JSON.stringify(t)),this.importRoutes(),[2]}})})},t.prototype.fetchPackages=function(){return fetch("/api/packages").then(function(e){return e.json()})},t.prototype.fetchPackageModule=function(e,t){return fetch("/api/packages/"+e+"/"+t).then(function(e){return e.json()})},t.prototype.importRoutes=function(){var e=this;if(!this.state.isLoading){var t=this.state.modules;t.map(function(n,r){return i.b(e,void 0,void 0,function(){var e=this;return i.d(this,function(u){return n.module.routes&&n.module.routes.map(function(u,o){return i.b(e,void 0,void 0,function(){return i.d(this,function(e){switch(e.label){case 0:return[4,this.importRouteComponent(n.packageName,u)];case 1:return e.sent(),console.log([n.module.routes.length,o]),r===t.length-1&&o===n.module.routes.length-1&&this.setModuleLoadingStateComplete(),[2]}})})}),console.log([t.length,r]),r===t.length-1&&this.setModuleLoadingStateComplete(),[2]})})})}},t.prototype.setModuleLoadingStateComplete=function(){this.setState({isLoadingRouteModules:!1})},t.prototype.importRouteComponent=function(e,t){return i.b(this,void 0,void 0,function(){var r,u,o;return i.d(this,function(i){switch(i.label){case 0:return this.setState({isLoadingRouteModules:!0}),[4,n(17)("./"+e+"/route-component-registry/route-component-registry")];case 1:return r=i.sent().routeComponentRegistry,console.log(r.AdminPage),u=r[t.component],console.log(u),(o=this.state.moduleRoutes).push({route:t,component:u}),this.setState({moduleRoutes:o}),[2]}})})},t}(r.Component)},17:function(e,t,n){var i={"./kairos-admin/route-component-registry/route-component-registry":[41,0,1]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(i)},r.id=17,e.exports=r}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NsaWVudC9JbmRleFBhZ2UudHN4Iiwid2VicGFjazovLy8uL3B1YmxpYy9jbGllbnQvYXBwLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMva2Fpcm9zL3BhY2thZ2VzIGxhenkgXlxcLlxcLy4qXFwvcm91dGVcXC1jb21wb25lbnRcXC1yZWdpc3RyeVxcL3JvdXRlXFwtY29tcG9uZW50XFwtcmVnaXN0cnkkIG5hbWVzcGFjZSBvYmplY3QiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCI0IiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJlIiwicHJvbWlzZXMiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvblNjcmlwdENvbXBsZXRlIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsInAiLCJqc29ucFNjcmlwdFNyYyIsImV2ZW50Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImNodW5rIiwiZXJyb3JUeXBlIiwidHlwZSIsInJlYWxTcmMiLCJ0YXJnZXQiLCJlcnJvciIsIkVycm9yIiwicmVxdWVzdCIsInVuZGVmaW5lZCIsInNldFRpbWVvdXQiLCJhcHBlbmRDaGlsZCIsImFsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJvZSIsImVyciIsImNvbnNvbGUiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiSW5kZXhQYWdlX0luZGV4UGFnZSIsIl9zdXBlciIsIkluZGV4UGFnZSIsInRzbGliX2VzNiIsInJlbmRlciIsInJlYWN0IiwidWlraXRfcmVhY3QiLCJkaXJlY3Rpb24iLCJzdHlsZSIsIndpZHRoIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJzaXplIiwicGFkZGluZyIsImFsaWdubWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFjdF9kb20iLCJhcHBfQXBwIiwiZ2V0RWxlbWVudEJ5SWQiLCJBcHAiLCJwcm9wcyIsIl90aGlzIiwidGhpcyIsInN0YXRlIiwiaXNMb2FkaW5nIiwiaXNMb2FkaW5nUm91dGVNb2R1bGVzIiwicGFja2FnZXMiLCJtb2R1bGVSb3V0ZXMiLCJjb21wb25lbnRXaWxsTW91bnQiLCJzZXR1cCIsIkJyb3dzZXJSb3V0ZXIiLCJSb3V0ZSIsImV4YWN0IiwicGF0aCIsImNvbXBvbmVudCIsInJlbmRlclJvdXRlcyIsIm1hcCIsInJvdXRlIiwiQ29tcG9uZW50IiwibG9nIiwiZmV0Y2hQYWNrYWdlcyIsIl9mIiwic2VudCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2hQYWNrYWdlTW9kdWxlIiwibUtleSIsInBhY2thZ2VOYW1lIiwic2V0U3RhdGUiLCJpbXBvcnRSb3V0ZXMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwibW9kdWxlTmFtZSIsIm1vZHVsZXNfMSIsIm1pIiwicm91dGVzIiwicmkiLCJpbXBvcnRSb3V0ZUNvbXBvbmVudCIsIl9hIiwic2V0TW9kdWxlTG9hZGluZ1N0YXRlQ29tcGxldGUiLCJyb3V0ZUNvbXBvbmVudFJlZ2lzdHJ5IiwiQWRtaW5QYWdlIiwiLi9rYWlyb3MtYWRtaW4vcm91dGUtY29tcG9uZW50LXJlZ2lzdHJ5L3JvdXRlLWNvbXBvbmVudC1yZWdpc3RyeSIsIndlYnBhY2tBc3luY0NvbnRleHQiLCJyZXEiLCJpZHMiLCJpZCIsImNvZGUiLCJrZXlzIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxFQUFBQyxHQU9BLElBTkEsSUFLQUMsRUFBQUMsRUFMQUMsRUFBQUgsRUFBQSxHQUNBSSxFQUFBSixFQUFBLEdBQ0FLLEVBQUFMLEVBQUEsR0FHQU0sRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBSUEsSUFEQWUsS0FBQWhCLEdBQ0FPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFBQUQsRUFBQWIsT0FHQWUsSUFFQSxTQUFBQSxJQUVBLElBREEsSUFBQUMsRUFDQWYsRUFBQSxFQUFpQkEsRUFBQVksRUFBQVYsT0FBNEJGLElBQUEsQ0FHN0MsSUFGQSxJQUFBZ0IsRUFBQUosRUFBQVosR0FDQWlCLEdBQUEs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QUNBLElBR0EsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBakMsRUFBQWdDLEdBQ0EsT0FBQUMsRUFPQW5JLFFBQUErQixJQUFBb0csRUFBQXRFLE1BQUEsR0FBQXFDLElBQUE3RyxFQUFBTyxJQUFBdUgsS0FBQSxXQUNBLElBQUFpQixFQUFBRCxFQUFBLEdBQ0EsT0FBQTlJLEVBQUErSSxLQVJBcEksUUFBQUMsVUFBQWtILEtBQUEsV0FDQSxJQUFBdkgsRUFBQSxJQUFBOEIsTUFBQSx1QkFBQXdHLEVBQUEsS0FFQSxNQURBdEksRUFBQXlJLEtBQUEsbUJBQ0F6SSxJQVFBcUksRUFBQUssS0FBQSxXQUNBLE9BQUFqSyxPQUFBaUssS0FBQXBDLElBRUErQixFQUFBRyxHQUFBLEdBQ0ExSSxFQUFBRCxRQUFBd0kiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQ0OiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIHNjcmlwdCBwYXRoIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBqc29ucFNjcmlwdFNyYyhjaHVua0lkKSB7XG4gXHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcIlwiICsgKHt9W2NodW5rSWRdfHxjaHVua0lkKSArIFwiLmpzXCJcbiBcdH1cblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG4gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4gXHQvLyBUaGUgY2h1bmsgbG9hZGluZyBmdW5jdGlvbiBmb3IgYWRkaXRpb25hbCBjaHVua3NcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZSA9IGZ1bmN0aW9uIHJlcXVpcmVFbnN1cmUoY2h1bmtJZCkge1xuIFx0XHR2YXIgcHJvbWlzZXMgPSBbXTtcblxuXG4gXHRcdC8vIEpTT05QIGNodW5rIGxvYWRpbmcgZm9yIGphdmFzY3JpcHRcblxuIFx0XHR2YXIgaW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEgIT09IDApIHsgLy8gMCBtZWFucyBcImFscmVhZHkgaW5zdGFsbGVkXCIuXG5cbiBcdFx0XHQvLyBhIFByb21pc2UgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rRGF0YSkge1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0pO1xuIFx0XHRcdH0gZWxzZSB7XG4gXHRcdFx0XHQvLyBzZXR1cCBQcm9taXNlIGluIGNodW5rIGNhY2hlXG4gXHRcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuIFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua0RhdGEgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbcmVzb2x2ZSwgcmVqZWN0XTtcbiBcdFx0XHRcdH0pO1xuIFx0XHRcdFx0cHJvbWlzZXMucHVzaChpbnN0YWxsZWRDaHVua0RhdGFbMl0gPSBwcm9taXNlKTtcblxuIFx0XHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdFx0dmFyIG9uU2NyaXB0Q29tcGxldGU7XG5cbiBcdFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRcdHNjcmlwdC50aW1lb3V0ID0gMTIwO1xuXG4gXHRcdFx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuIFx0XHRcdFx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgX193ZWJwYWNrX3JlcXVpcmVfXy5uYyk7XG4gXHRcdFx0XHR9XG4gXHRcdFx0XHRzY3JpcHQuc3JjID0ganNvbnBTY3JpcHRTcmMoY2h1bmtJZCk7XG4gXHRcdFx0XHRvblNjcmlwdENvbXBsZXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gXHRcdFx0XHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cbiBcdFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gbnVsbDtcbiBcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuIFx0XHRcdFx0XHR2YXIgY2h1bmsgPSBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF07XG4gXHRcdFx0XHRcdGlmKGNodW5rICE9PSAwKSB7XG4gXHRcdFx0XHRcdFx0aWYoY2h1bmspIHtcbiBcdFx0XHRcdFx0XHRcdHZhciBlcnJvclR5cGUgPSBldmVudCAmJiAoZXZlbnQudHlwZSA9PT0gJ2xvYWQnID8gJ21pc3NpbmcnIDogZXZlbnQudHlwZSk7XG4gXHRcdFx0XHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuIFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCdMb2FkaW5nIGNodW5rICcgKyBjaHVua0lkICsgJyBmYWlsZWQuXFxuKCcgKyBlcnJvclR5cGUgKyAnOiAnICsgcmVhbFNyYyArICcpJyk7XG4gXHRcdFx0XHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IucmVxdWVzdCA9IHJlYWxTcmM7XG4gXHRcdFx0XHRcdFx0XHRjaHVua1sxXShlcnJvcik7XG4gXHRcdFx0XHRcdFx0fVxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IHVuZGVmaW5lZDtcbiBcdFx0XHRcdFx0fVxuIFx0XHRcdFx0fTtcbiBcdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuIFx0XHRcdFx0XHRvblNjcmlwdENvbXBsZXRlKHsgdHlwZTogJ3RpbWVvdXQnLCB0YXJnZXQ6IHNjcmlwdCB9KTtcbiBcdFx0XHRcdH0sIDEyMDAwMCk7XG4gXHRcdFx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBvblNjcmlwdENvbXBsZXRlO1xuIFx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuIFx0fTtcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG4gXHQvLyBvbiBlcnJvciBmdW5jdGlvbiBmb3IgYXN5bmMgbG9hZGluZ1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vZSA9IGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IHRocm93IGVycjsgfTtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzE2LDJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciwgUm91dGUsIE5hdkxpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcblxuaW1wb3J0IHsgXG4gICAgQ29udGFpbmVyLFxuICAgIENvdmVyLFxuICAgIEljb24sXG4gICAgSW1hZ2UsXG4gICAgTGluayxcbiAgICBMaXN0LFxuICAgIExpc3RJdGVtLFxuICAgIE9mZmNhbnZhcyxcbiAgICBPZmZjYW52YXNDb250YWluZXIsXG4gICAgTmF2YmFyLFxuICAgIE5hdmJhckNvbnRhaW5lcixcbiAgICBOYXZiYXJTdGlja3ksXG4gICAgU2Nyb2xsc3B5LFxuICAgIFNlY3Rpb24sXG4gICAgTGlnaHQsXG4gICAgRmxleCxcbiAgICBQYXJhbGxheFxufSBmcm9tICd1aWtpdC1yZWFjdCc7XG5cbmV4cG9ydCBjbGFzcyBJbmRleFBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8RmxleCBkaXJlY3Rpb249XCJjb2x1bW5cIj5cbiAgICAgICAgICAgICAgICA8Q29udGFpbmVyIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScsIHBhZGRpbmdMZWZ0OiAnMCcsIHBhZGRpbmdSaWdodDogJzAnIH19IHNpemU9XCJleHBhbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgPENvdmVyIHR5cGU9XCJpbWFnZVwiIHNyYz1cIi9kaW1lbnNpb24tY21zL2NsaWVudC9pbWFnZXMvYmFja2dyb3VuZC5qcGVnXCIgLz5cbiAgICAgICAgICAgICAgICA8L0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8U2VjdGlvbiBzaXplPVwiZGVmYXVsdFwiIHBhZGRpbmc+XG4gICAgICAgICAgICAgICAgICAgIDxDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RmxleCBhbGlnbm1lbnQ9XCJjZW50ZXJcIiBkaXJlY3Rpb249XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlzdCB0eXBlPVwiZGl2aWRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlzdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBJbnRlZ2VyIG5lYyBvZGlvLiBQcmFlc2VudCBsaWJlcm8uIFNlZCBjdXJzdXMgYW50ZSBkYXBpYnVzIGRpYW0uIFNlZCBuaXNpLiBOdWxsYSBxdWlzIHNlbSBhdCBuaWJoIGVsZW1lbnR1bSBpbXBlcmRpZXQuIER1aXMgc2FnaXR0aXMgaXBzdW0uIDxiPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQ8L2I+LiBQcmFlc2VudCBtYXVyaXMuIEZ1c2NlIG5lYyB0ZWxsdXMgc2VkIGF1Z3VlIHNlbXBlciBwb3J0YS4gPGI+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdDwvYj4uIE1hdXJpcyBtYXNzYS4gVmVzdGlidWx1bSBsYWNpbmlhIGFyY3UgZWdldCBudWxsYS4gQ2xhc3MgYXB0ZW50IHRhY2l0aSBzb2Npb3NxdSBhZCBsaXRvcmEgdG9ycXVlbnQgcGVyIGNvbnViaWEgbm9zdHJhLCBwZXIgaW5jZXB0b3MgaGltZW5hZW9zLiBDdXJhYml0dXIgc29kYWxlcyBsaWd1bGEgaW4gbGliZXJvLiA8Yj5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0PC9iPi4gU2VkIGRpZ25pc3NpbSBsYWNpbmlhIG51bmMuIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtPiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkN1cmFiaXR1ciB0b3J0b3IuIFBlbGxlbnRlc3F1ZSBuaWJoLiA8aT5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0PC9pPi4gQWVuZWFuIHF1YW0uIEluIHNjZWxlcmlzcXVlIHNlbSBhdCBkb2xvci4gTWFlY2VuYXMgbWF0dGlzLiBTZWQgY29udmFsbGlzIHRyaXN0aXF1ZSBzZW0uIFByb2luIHV0IGxpZ3VsYSB2ZWwgbnVuYyBlZ2VzdGFzIHBvcnR0aXRvci4gTW9yYmkgbGVjdHVzIHJpc3VzLCBpYWN1bGlzIHZlbCwgc3VzY2lwaXQgcXVpcywgbHVjdHVzIG5vbiwgbWFzc2EuIEZ1c2NlIGFjIHR1cnBpcyBxdWlzIGxpZ3VsYSBsYWNpbmlhIGFsaXF1ZXQuIDxpPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQ8L2k+LiBNYXVyaXMgaXBzdW0uIE51bGxhIG1ldHVzIG1ldHVzLCB1bGxhbWNvcnBlciB2ZWwsIHRpbmNpZHVudCBzZWQsIGV1aXNtb2QgaW4sIG5pYmguIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+PGk+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdDwvaT4uIFF1aXNxdWUgdm9sdXRwYXQgY29uZGltZW50dW0gdmVsaXQuIDxpPlNlZCBkaWduaXNzaW0gbGFjaW5pYSBudW5jPC9pPi4gQ2xhc3MgYXB0ZW50IHRhY2l0aSBzb2Npb3NxdSBhZCBsaXRvcmEgdG9ycXVlbnQgcGVyIGNvbnViaWEgbm9zdHJhLCBwZXIgaW5jZXB0b3MgaGltZW5hZW9zLiBOYW0gbmVjIGFudGUuIFNlZCBsYWNpbmlhLCB1cm5hIG5vbiB0aW5jaWR1bnQgbWF0dGlzLCB0b3J0b3IgbmVxdWUgYWRpcGlzY2luZyBkaWFtLCBhIGN1cnN1cyBpcHN1bSBhbnRlIHF1aXMgdHVycGlzLiBOdWxsYSBmYWNpbGlzaS4gPGI+UHJvaW4gdXQgbGlndWxhIHZlbCBudW5jIGVnZXN0YXMgcG9ydHRpdG9yPC9iPi4gVXQgZnJpbmdpbGxhLiBTdXNwZW5kaXNzZSBwb3RlbnRpLiBOdW5jIGZldWdpYXQgbWkgYSB0ZWxsdXMgY29uc2VxdWF0IGltcGVyZGlldC4gVmVzdGlidWx1bSBzYXBpZW4uIFByb2luIHF1YW0uIEV0aWFtIHVsdHJpY2VzLiBTdXNwZW5kaXNzZSBpbiBqdXN0byBldSBtYWduYSBsdWN0dXMgc3VzY2lwaXQuIFNlZCBsZWN0dXMuIEludGVnZXIgZXVpc21vZCBsYWN1cyBsdWN0dXMgbWFnbmEuIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UXVpc3F1ZSBjdXJzdXMsIG1ldHVzIHZpdGFlIHBoYXJldHJhIGF1Y3Rvciwgc2VtIG1hc3NhIG1hdHRpcyBzZW0sIGF0IGludGVyZHVtIG1hZ25hIGF1Z3VlIGVnZXQgZGlhbS4gVmVzdGlidWx1bSBhbnRlIGlwc3VtIHByaW1pcyBpbiBmYXVjaWJ1cyBvcmNpIGx1Y3R1cyBldCB1bHRyaWNlcyBwb3N1ZXJlIGN1YmlsaWEgQ3VyYWU7IE1vcmJpIGxhY2luaWEgbW9sZXN0aWUgZHVpLiBQcmFlc2VudCBibGFuZGl0IGRvbG9yLiBTZWQgbm9uIHF1YW0uIEluIHZlbCBtaSBzaXQgYW1ldCBhdWd1ZSBjb25ndWUgZWxlbWVudHVtLiBNb3JiaSBpbiBpcHN1bSBzaXQgYW1ldCBwZWRlIGZhY2lsaXNpcyBsYW9yZWV0LiBEb25lYyBsYWN1cyBudW5jLCB2aXZlcnJhIG5lYywgYmxhbmRpdCB2ZWwsIGVnZXN0YXMgZXQsIGF1Z3VlLiBWZXN0aWJ1bHVtIHRpbmNpZHVudCBtYWxlc3VhZGEgdGVsbHVzLiBVdCB1bHRyaWNlcyB1bHRyaWNlcyBlbmltLiA8Yj5TdXNwZW5kaXNzZSBpbiBqdXN0byBldSBtYWduYSBsdWN0dXMgc3VzY2lwaXQ8L2I+LiBDdXJhYml0dXIgc2l0IGFtZXQgbWF1cmlzLiBNb3JiaSBpbiBkdWkgcXVpcyBlc3QgcHVsdmluYXIgdWxsYW1jb3JwZXIuIDxiPlZlc3RpYnVsdW0gYW50ZSBpcHN1bSBwcmltaXMgaW4gZmF1Y2lidXMgb3JjaSBsdWN0dXMgZXQgdWx0cmljZXMgcG9zdWVyZSBjdWJpbGlhIEN1cmFlOyBNb3JiaSBsYWNpbmlhIG1vbGVzdGllIGR1aTwvYj4uIE51bGxhIGZhY2lsaXNpLiBJbnRlZ2VyIGxhY2luaWEgc29sbGljaXR1ZGluIG1hc3NhLiA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaXN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9GbGV4PlxuICAgICAgICAgICAgICAgICAgICA8L0NvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8L1NlY3Rpb24+XG4gICAgICAgICAgICA8L0ZsZXg+XG4gICAgICAgIClcbiAgICB9XG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL25vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9lczYtcHJvbWlzZS5kLnRzXCIgLz5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgeyBCcm93c2VyUm91dGVyIGFzIFJvdXRlciwgUm91dGUsIE5hdkxpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCBcImVzNi1wcm9taXNlL2F1dG9cIjtcbmltcG9ydCAncHJpc21qcyc7XG5pbXBvcnQgJ3ByaXNtanMvY29tcG9uZW50cy9wcmlzbS1qYXZhc2NyaXB0Lm1pbic7XG5pbXBvcnQgJ3ByaXNtanMvY29tcG9uZW50cy9wcmlzbS1qc3gubWluJztcbmltcG9ydCAncHJpc21qcy9jb21wb25lbnRzL3ByaXNtLXRzeC5taW4nO1xuaW1wb3J0ICdwcmlzbWpzL3BsdWdpbnMvdG9vbGJhci9wcmlzbS10b29sYmFyJztcbmltcG9ydCAncHJpc21qcy9wbHVnaW5zL2NvcHktdG8tY2xpcGJvYXJkL3ByaXNtLWNvcHktdG8tY2xpcGJvYXJkJztcbmltcG9ydCAncHJpc21qcy9jb21wb25lbnRzL3ByaXNtLWNzcy5taW4nO1xuaW1wb3J0IHsgXG4gICAgU2VjdGlvblxufSBmcm9tICd1aWtpdC1yZWFjdCc7XG5pbXBvcnQgeyBBZG1pblBhZ2UgfSBmcm9tICcuLy4uLy4uL3NyYy9rYWlyb3MvcGFja2FnZXMva2Fpcm9zLWFkbWluL3BhZ2VzL0FkbWluL0FkbWluUGFnZSc7XG5pbXBvcnQgeyBJbmRleFBhZ2UgfSBmcm9tICcuL0luZGV4UGFnZSc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKFxuICAgICAgICA8QXBwIC8+LFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpXG4gICAgKTtcbn0sIGZhbHNlKTtcblxuY2xhc3MgQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgICAgICAgaXNMb2FkaW5nUm91dGVNb2R1bGVzOiB0cnVlLFxuICAgICAgICAgICAgbW9kdWxlczogbnVsbCxcbiAgICAgICAgICAgIHBhY2thZ2VzOiBudWxsLFxuICAgICAgICAgICAgbW9kdWxlUm91dGVzOiBbXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cCgpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxSb3V0ZXI+XG4gICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi9cIiBjb21wb25lbnQ9e0luZGV4UGFnZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzTG9hZGluZ1JvdXRlTW9kdWxlcyA/IFwiXCIgOiB0aGlzLnJlbmRlclJvdXRlcygpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgPC9Sb3V0ZXI+XG4gICAgICAgIClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclJvdXRlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzTG9hZGluZ1JvdXRlTW9kdWxlcykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUubW9kdWxlUm91dGVzLm1hcChyb3V0ZSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IENvbXBvbmVudCA9IHJvdXRlLmNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyb3V0ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxSb3V0ZSBleGFjdD17cm91dGUucm91dGUuZXhhY3R9IHBhdGg9e3JvdXRlLnJvdXRlLnBhdGh9IGNvbXBvbmVudD17Q29tcG9uZW50fSAvPlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2V0dXAoKSB7XG4gICAgICAgIGxldCBwYWNrYWdlcyA9IGF3YWl0IHRoaXMuZmV0Y2hQYWNrYWdlcygpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGFja2FnZXMnLCBKU09OLnN0cmluZ2lmeShwYWNrYWdlcykpO1xuICAgICAgICBsZXQgbW9kdWxlcyA9IFtdXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBwYWNrYWdlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbUtleSBpbiBwYWNrYWdlc1trZXldWydtb2R1bGVzJ10pIHtcbiAgICAgICAgICAgICAgICBsZXQgbW9kdWxlID0gYXdhaXQgdGhpcy5mZXRjaFBhY2thZ2VNb2R1bGUoa2V5LCBtS2V5KTtcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goeyBtb2R1bGUsIHBhY2thZ2VOYW1lOiBrZXksIHR5cGU6IG1LZXkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBhY2thZ2VzOiBwYWNrYWdlcyxcbiAgICAgICAgICAgIG1vZHVsZXM6IG1vZHVsZXMsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbW9kdWxlcycsIEpTT04uc3RyaW5naWZ5KG1vZHVsZXMpKTtcbiAgICAgICAgdGhpcy5pbXBvcnRSb3V0ZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZldGNoUGFja2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCgnL2FwaS9wYWNrYWdlcycpXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGZldGNoUGFja2FnZU1vZHVsZShwYWNrYWdlTmFtZSwgbW9kdWxlTmFtZSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYC9hcGkvcGFja2FnZXMvJHtwYWNrYWdlTmFtZX0vJHttb2R1bGVOYW1lfWApXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGltcG9ydFJvdXRlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmlzTG9hZGluZykge1xuICAgICAgICAgICAgY29uc3QgbW9kdWxlcyA9IHRoaXMuc3RhdGUubW9kdWxlcztcbiAgICAgICAgICAgIG1vZHVsZXMubWFwKGFzeW5jIChtb2R1bGUsIG1pKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZS5tb2R1bGUucm91dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5tb2R1bGUucm91dGVzLm1hcChhc3luYyAocm91dGUsIHJpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmltcG9ydFJvdXRlQ29tcG9uZW50KG1vZHVsZS5wYWNrYWdlTmFtZSwgcm91dGUpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhbbW9kdWxlLm1vZHVsZS5yb3V0ZXMubGVuZ3RoLCByaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pID09PSBtb2R1bGVzLmxlbmd0aCAtIDEgJiYgcmkgPT09IG1vZHVsZS5tb2R1bGUucm91dGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZHVsZUxvYWRpbmdTdGF0ZUNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhbbW9kdWxlcy5sZW5ndGgsIG1pXSk7XG4gICAgICAgICAgICAgICAgaWYgKG1pID09PSBtb2R1bGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNb2R1bGVMb2FkaW5nU3RhdGVDb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRNb2R1bGVMb2FkaW5nU3RhdGVDb21wbGV0ZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZ1JvdXRlTW9kdWxlczogZmFsc2UgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBpbXBvcnRSb3V0ZUNvbXBvbmVudChwYWNrYWdlTmFtZSwgcm91dGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTG9hZGluZ1JvdXRlTW9kdWxlczogdHJ1ZSB9KTtcbiAgICAgICAgbGV0IHsgcm91dGVDb21wb25lbnRSZWdpc3RyeSB9ID0gYXdhaXQgaW1wb3J0KGAuLy4uLy4uL3NyYy9rYWlyb3MvcGFja2FnZXMvJHtwYWNrYWdlTmFtZX0vcm91dGUtY29tcG9uZW50LXJlZ2lzdHJ5L3JvdXRlLWNvbXBvbmVudC1yZWdpc3RyeWApO1xuICAgICAgICBjb25zb2xlLmxvZyhyb3V0ZUNvbXBvbmVudFJlZ2lzdHJ5LkFkbWluUGFnZSk7XG4gICAgICAgIGNvbnN0IENvbXBvbmVudCA9IHJvdXRlQ29tcG9uZW50UmVnaXN0cnlbcm91dGUuY29tcG9uZW50XTtcbiAgICAgICAgY29uc29sZS5sb2coQ29tcG9uZW50KTtcbiAgICAgICAgbGV0IG1vZHVsZVJvdXRlcyA9IHRoaXMuc3RhdGUubW9kdWxlUm91dGVzO1xuICAgICAgICBtb2R1bGVSb3V0ZXMucHVzaCh7IHJvdXRlLCBjb21wb25lbnQ6IENvbXBvbmVudCB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1vZHVsZVJvdXRlcyB9KTtcbiAgICB9XG59IiwidmFyIG1hcCA9IHtcblx0XCIuL2thaXJvcy1hZG1pbi9yb3V0ZS1jb21wb25lbnQtcmVnaXN0cnkvcm91dGUtY29tcG9uZW50LXJlZ2lzdHJ5XCI6IFtcblx0XHQ0MSxcblx0XHQwLFxuXHRcdDFcblx0XVxufTtcbmZ1bmN0aW9uIHdlYnBhY2tBc3luY0NvbnRleHQocmVxKSB7XG5cdHZhciBpZHMgPSBtYXBbcmVxXTtcblx0aWYoIWlkcykge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdFx0dGhyb3cgZTtcblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gUHJvbWlzZS5hbGwoaWRzLnNsaWNlKDEpLm1hcChfX3dlYnBhY2tfcmVxdWlyZV9fLmUpKS50aGVuKGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZCA9IGlkc1swXTtcblx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG5cdH0pO1xufVxud2VicGFja0FzeW5jQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0FzeW5jQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tBc3luY0NvbnRleHQuaWQgPSAxNztcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0FzeW5jQ29udGV4dDsiXSwic291cmNlUm9vdCI6IiJ9