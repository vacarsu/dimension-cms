!function(e){function t(t){for(var i,o,s=t[0],a=t[1],l=t[2],m=0,p=[];m<s.length;m++)o=s[m],r[o]&&p.push(r[o][0]),r[o]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);for(c&&c(t);p.length;)p.shift()();return u.push.apply(u,l||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],i=!0,s=1;s<n.length;s++){var a=n[s];0!==r[a]&&(i=!1)}i&&(u.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={3:0},u=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=r[e]=[t,i]});t.push(n[2]=i);var u,s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(e){return o.p+""+({}[e]||e)+".js"}(e),u=function(t){a.onerror=a.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),u=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+u+")");o.type=i,o.request=u,n[1](o)}r[e]=void 0}};var l=setTimeout(function(){u({type:"timeout",target:a})},12e4);a.onerror=a.onload=u,s.appendChild(a)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var c=a;u.push([16,2]),n()}({16:function(e,t,n){"use strict";n.r(t);var i=n(4),r=n(0),u=n(15),o=n(111),s=n(269),a=(n(28),n(25),n(24),n(23),n(22),n(21),n(20),n(18),n(5)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.c(t,e),t.prototype.render=function(){return r.createElement(a.l,{direction:"column"},r.createElement(a.i,{style:{width:"100%",paddingLeft:"0",paddingRight:"0"},size:"expand"},r.createElement(a.j,{type:"image",src:"/dimension-cms/client/images/background.jpeg"})),r.createElement(a.z,{size:"default",padding:!0},r.createElement(a.i,null,r.createElement(a.l,{alignment:"center",direction:"row"},r.createElement(a.r,{type:"divider"},r.createElement(a.s,null,r.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Praesent mauris. Fusce nec tellus sed augue semper porta. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero. ",r.createElement("b",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Sed dignissim lacinia nunc. ")),r.createElement(a.s,null,r.createElement("p",null,"Curabitur tortor. Pellentesque nibh. ",r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. ",r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh. ")),r.createElement(a.s,null,r.createElement("p",null,r.createElement("i",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit"),". Quisque volutpat condimentum velit. ",r.createElement("i",null,"Sed dignissim lacinia nunc"),". Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. ",r.createElement("b",null,"Proin ut ligula vel nunc egestas porttitor"),". Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet. Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus magna. ")),r.createElement(a.s,null,r.createElement("p",null,"Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. ",r.createElement("b",null,"Suspendisse in justo eu magna luctus suscipit"),". Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. ",r.createElement("b",null,"Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui"),". Nulla facilisi. Integer lacinia sollicitudin massa. ")))))))},t}(r.Component);document.addEventListener("DOMContentLoaded",function(){Object(u.render)(r.createElement(c,null),document.getElementById("root"))},!1);var c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isLoading:!0,isLoadingRouteModules:!0,modules:null,packages:null,moduleRoutes:[]},n}return i.c(t,e),t.prototype.componentWillMount=function(){this.setup()},t.prototype.render=function(){return r.createElement(s.a,null,r.createElement(r.Fragment,null,r.createElement(o.a,{exact:!0,path:"/",component:l}),r.createElement("div",null,this.state.isLoadingRouteModules?"":this.renderRoutes())))},t.prototype.renderRoutes=function(){if(!this.state.isLoadingRouteModules)return this.state.moduleRoutes.map(function(e){var t=e.component;return console.log(e),r.createElement(o.a,{exact:e.route.exact,path:e.route.path,component:t})})},t.prototype.setup=function(){return i.b(this,void 0,void 0,function(){var e,t,n,r,u,o,s,a,l,c,m;return i.d(this,function(i){switch(i.label){case 0:return[4,this.fetchPackages()];case 1:for(r in e=i.sent(),localStorage.setItem("packages",JSON.stringify(e)),t=[],n=[],e)n.push(r);u=0,i.label=2;case 2:if(!(u<n.length))return[3,7];for(a in o=n[u],s=[],e[o].modules)s.push(a);l=0,i.label=3;case 3:return l<s.length?(c=s[l],[4,this.fetchPackageModule(o,c)]):[3,6];case 4:m=i.sent(),t.push({module:m,packageName:o}),i.label=5;case 5:return l++,[3,3];case 6:return u++,[3,2];case 7:return this.setState({packages:e,modules:t,isLoading:!1}),this.importRoutes(),[2]}})})},t.prototype.fetchPackages=function(){return fetch("/api/packages").then(function(e){return e.json()})},t.prototype.fetchPackageModule=function(e,t){return fetch("/api/packages/"+e+"/"+t).then(function(e){return e.json()})},t.prototype.importRoutes=function(){var e=this;if(!this.state.isLoading){var t=this.state.modules;t.map(function(n,r){return i.b(e,void 0,void 0,function(){var e=this;return i.d(this,function(u){return n.module.routes&&n.module.routes.map(function(u,o){return i.b(e,void 0,void 0,function(){return i.d(this,function(e){switch(e.label){case 0:return[4,this.importRouteComponent(n.packageName,u)];case 1:return e.sent(),console.log([n.module.routes.length,o]),r===t.length-1&&o===n.module.routes.length-1&&this.setModuleLoadingStateComplete(),[2]}})})}),console.log([t.length,r]),r===t.length-1&&this.setModuleLoadingStateComplete(),[2]})})})}},t.prototype.setModuleLoadingStateComplete=function(){this.setState({isLoadingRouteModules:!1})},t.prototype.importRouteComponent=function(e,t){return i.b(this,void 0,void 0,function(){var r,u,o;return i.d(this,function(i){switch(i.label){case 0:return this.setState({isLoadingRouteModules:!0}),[4,n(17)("./"+e+"/route-component-registry/route-component-registry")];case 1:return r=i.sent().routeComponentRegistry,console.log(r.AdminPage),u=r[t.component],console.log(u),(o=this.state.moduleRoutes).push({route:t,component:u}),this.setState({moduleRoutes:o}),[2]}})})},t}(r.Component)},17:function(e,t,n){var i={"./kairos-admin/route-component-registry/route-component-registry":[41,0,1]};function r(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(i)},r.id=17,e.exports=r}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2NsaWVudC9JbmRleFBhZ2UudHN4Iiwid2VicGFjazovLy8uL3B1YmxpYy9jbGllbnQvYXBwLnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMva2Fpcm9zL3BhY2thZ2VzIGxhenkgXlxcLlxcLy4qXFwvcm91dGVcXC1jb21wb25lbnRcXC1yZWdpc3RyeVxcL3JvdXRlXFwtY29tcG9uZW50XFwtcmVnaXN0cnkkIG5hbWVzcGFjZSBvYmplY3QiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJlIiwicHJvbWlzZXMiLCJpbnN0YWxsZWRDaHVua0RhdGEiLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvblNjcmlwdENvbXBsZXRlIiwiaGVhZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwiY2hhcnNldCIsInRpbWVvdXQiLCJuYyIsInNldEF0dHJpYnV0ZSIsInNyYyIsInAiLCJqc29ucFNjcmlwdFNyYyIsImV2ZW50Iiwib25lcnJvciIsIm9ubG9hZCIsImNsZWFyVGltZW91dCIsImNodW5rIiwiZXJyb3JUeXBlIiwidHlwZSIsInJlYWxTcmMiLCJ0YXJnZXQiLCJlcnJvciIsIkVycm9yIiwicmVxdWVzdCIsInVuZGVmaW5lZCIsInNldFRpbWVvdXQiLCJhcHBlbmRDaGlsZCIsImFsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJvZSIsImVyciIsImNvbnNvbGUiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiSW5kZXhQYWdlX0luZGV4UGFnZSIsIl9zdXBlciIsIkluZGV4UGFnZSIsInRzbGliX2VzNiIsInJlbmRlciIsInJlYWN0IiwidWlraXRfcmVhY3QiLCJkaXJlY3Rpb24iLCJzdHlsZSIsIndpZHRoIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJzaXplIiwicGFkZGluZyIsImFsaWdubWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZWFjdF9kb20iLCJhcHBfQXBwIiwiZ2V0RWxlbWVudEJ5SWQiLCJBcHAiLCJwcm9wcyIsIl90aGlzIiwidGhpcyIsInN0YXRlIiwiaXNMb2FkaW5nIiwiaXNMb2FkaW5nUm91dGVNb2R1bGVzIiwicGFja2FnZXMiLCJtb2R1bGVSb3V0ZXMiLCJjb21wb25lbnRXaWxsTW91bnQiLCJzZXR1cCIsIkJyb3dzZXJSb3V0ZXIiLCJSb3V0ZSIsImV4YWN0IiwicGF0aCIsImNvbXBvbmVudCIsInJlbmRlclJvdXRlcyIsIm1hcCIsInJvdXRlIiwiQ29tcG9uZW50IiwibG9nIiwiZmV0Y2hQYWNrYWdlcyIsIl9mIiwic2VudCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2hQYWNrYWdlTW9kdWxlIiwibUtleSIsInBhY2thZ2VOYW1lIiwic2V0U3RhdGUiLCJpbXBvcnRSb3V0ZXMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwibW9kdWxlTmFtZSIsIm1vZHVsZXNfMSIsIm1pIiwicm91dGVzIiwicmkiLCJpbXBvcnRSb3V0ZUNvbXBvbmVudCIsIl9hIiwic2V0TW9kdWxlTG9hZGluZ1N0YXRlQ29tcGxldGUiLCJyb3V0ZUNvbXBvbmVudFJlZ2lzdHJ5IiwiQWRtaW5QYWdlIiwiLi9rYWlyb3MtYWRtaW4vcm91dGUtY29tcG9uZW50LXJlZ2lzdHJ5L3JvdXRlLWNvbXBvbmVudC1yZWdpc3RyeSIsIndlYnBhY2tBc3luY0NvbnRleHQiLCJyZXEiLCJpZHMiLCJpZCIsImNvZGUiLCJrZXlzIl0sIm1hcHBpbmdzIjoiYUFDQSxTQUFBQSxFQUFBQyxHQU9BLElBTkEsSUFLQUMsRUFBQUMsRUFMQUMsRUFBQUgsRUFBQSxHQUNBSSxFQUFBSixFQUFBLEdBQ0FLLEVBQUFMLEVBQUEsR0FHQU0sRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBSUEsSUFEQWUsS0FBQWhCLEdBQ0FPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFBQUQsRUFBQWIsT0FHQWUsSUFFQSxTQUFBQSxJQUVBLElBREEsSUFBQUMsRUFDQWYsRUFBQSxFQUFpQkEsRUFBQVksRUFBQVYsT0FBNEJGLElBQUEsQ0FHN0MsSUFGQSxJQUFBZ0IsRUFBQUosRUFBQVosR0FDQWlCLEdBQUEs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QUFDLEVBT0FuSSxRQUFBK0IsSUFBQW9HLEVBQUF0RSxNQUFBLEdBQUFxQyxJQUFBN0csRUFBQU8sSUFBQXVILEtBQUEsV0FDQSxJQUFBaUIsRUFBQUQsRUFBQSxHQUNBLE9BQUE5SSxFQUFBK0ksS0FSQXBJLFFBQUFDLFVBQUFrSCxLQUFBLFdBQ0EsSUFBQXZILEVBQUEsSUFBQThCLE1BQUEsdUJBQUF3RyxFQUFBLEtBRUEsTUFEQXRJLEVBQUF5SSxLQUFBLG1CQUNBekksSUFRQXFJLEVBQUFLLEtBQUEsV0FDQSxPQUFBakssT0FBQWlLLEtBQUFwQyxJQUVBK0IsRUFBQUcsR0FBQSxHQUNBMUksRUFBQUQsUUFBQXdJIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0MzogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBzY3JpcHQgcGF0aCBmdW5jdGlvblxuIFx0ZnVuY3Rpb24ganNvbnBTY3JpcHRTcmMoY2h1bmtJZCkge1xuIFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArICh7fVtjaHVua0lkXXx8Y2h1bmtJZCkgKyBcIi5qc1wiXG4gXHR9XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQpIHtcbiBcdFx0dmFyIHByb21pc2VzID0gW107XG5cblxuIFx0XHQvLyBKU09OUCBjaHVuayBsb2FkaW5nIGZvciBqYXZhc2NyaXB0XG5cbiBcdFx0dmFyIGluc3RhbGxlZENodW5rRGF0YSA9IGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtEYXRhICE9PSAwKSB7IC8vIDAgbWVhbnMgXCJhbHJlYWR5IGluc3RhbGxlZFwiLlxuXG4gXHRcdFx0Ly8gYSBQcm9taXNlIG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua0RhdGEpIHtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdKTtcbiBcdFx0XHR9IGVsc2Uge1xuIFx0XHRcdFx0Ly8gc2V0dXAgUHJvbWlzZSBpbiBjaHVuayBjYWNoZVxuIFx0XHRcdFx0dmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiBcdFx0XHRcdFx0aW5zdGFsbGVkQ2h1bmtEYXRhID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW3Jlc29sdmUsIHJlamVjdF07XG4gXHRcdFx0XHR9KTtcbiBcdFx0XHRcdHByb21pc2VzLnB1c2goaW5zdGFsbGVkQ2h1bmtEYXRhWzJdID0gcHJvbWlzZSk7XG5cbiBcdFx0XHRcdC8vIHN0YXJ0IGNodW5rIGxvYWRpbmdcbiBcdFx0XHRcdHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiBcdFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRcdHZhciBvblNjcmlwdENvbXBsZXRlO1xuXG4gXHRcdFx0XHRzY3JpcHQuY2hhcnNldCA9ICd1dGYtOCc7XG4gXHRcdFx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblxuIFx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubmMpIHtcbiBcdFx0XHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuIFx0XHRcdFx0fVxuIFx0XHRcdFx0c2NyaXB0LnNyYyA9IGpzb25wU2NyaXB0U3JjKGNodW5rSWQpO1xuIFx0XHRcdFx0b25TY3JpcHRDb21wbGV0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuIFx0XHRcdFx0XHQvLyBhdm9pZCBtZW0gbGVha3MgaW4gSUUuXG4gXHRcdFx0XHRcdHNjcmlwdC5vbmVycm9yID0gc2NyaXB0Lm9ubG9hZCA9IG51bGw7XG4gXHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiBcdFx0XHRcdFx0dmFyIGNodW5rID0gaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuIFx0XHRcdFx0XHRpZihjaHVuayAhPT0gMCkge1xuIFx0XHRcdFx0XHRcdGlmKGNodW5rKSB7XG4gXHRcdFx0XHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuIFx0XHRcdFx0XHRcdFx0dmFyIHJlYWxTcmMgPSBldmVudCAmJiBldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnNyYztcbiBcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IG5ldyBFcnJvcignTG9hZGluZyBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKScpO1xuIFx0XHRcdFx0XHRcdFx0ZXJyb3IudHlwZSA9IGVycm9yVHlwZTtcbiBcdFx0XHRcdFx0XHRcdGVycm9yLnJlcXVlc3QgPSByZWFsU3JjO1xuIFx0XHRcdFx0XHRcdFx0Y2h1bmtbMV0oZXJyb3IpO1xuIFx0XHRcdFx0XHRcdH1cbiBcdFx0XHRcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG4gXHRcdFx0XHRcdH1cbiBcdFx0XHRcdH07XG4gXHRcdFx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiBcdFx0XHRcdFx0b25TY3JpcHRDb21wbGV0ZSh7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSk7XG4gXHRcdFx0XHR9LCAxMjAwMDApO1xuIFx0XHRcdFx0c2NyaXB0Lm9uZXJyb3IgPSBzY3JpcHQub25sb2FkID0gb25TY3JpcHRDb21wbGV0ZTtcbiBcdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0cmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiBcdH07XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdC9cIjtcblxuIFx0Ly8gb24gZXJyb3IgZnVuY3Rpb24gZm9yIGFzeW5jIGxvYWRpbmdcbiBcdF9fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH07XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFsxNiwyXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBOYXZMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5cbmltcG9ydCB7IFxuICAgIENvbnRhaW5lcixcbiAgICBDb3ZlcixcbiAgICBJY29uLFxuICAgIEltYWdlLFxuICAgIExpbmssXG4gICAgTGlzdCxcbiAgICBMaXN0SXRlbSxcbiAgICBPZmZjYW52YXMsXG4gICAgT2ZmY2FudmFzQ29udGFpbmVyLFxuICAgIE5hdmJhcixcbiAgICBOYXZiYXJDb250YWluZXIsXG4gICAgTmF2YmFyU3RpY2t5LFxuICAgIFNjcm9sbHNweSxcbiAgICBTZWN0aW9uLFxuICAgIExpZ2h0LFxuICAgIEZsZXgsXG4gICAgUGFyYWxsYXhcbn0gZnJvbSAndWlraXQtcmVhY3QnO1xuXG5leHBvcnQgY2xhc3MgSW5kZXhQYWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEZsZXggZGlyZWN0aW9uPVwiY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgPENvbnRhaW5lciBzdHlsZT17eyB3aWR0aDogJzEwMCUnLCBwYWRkaW5nTGVmdDogJzAnLCBwYWRkaW5nUmlnaHQ6ICcwJyB9fSBzaXplPVwiZXhwYW5kXCI+XG4gICAgICAgICAgICAgICAgICAgIDxDb3ZlciB0eXBlPVwiaW1hZ2VcIiBzcmM9XCIvZGltZW5zaW9uLWNtcy9jbGllbnQvaW1hZ2VzL2JhY2tncm91bmQuanBlZ1wiIC8+XG4gICAgICAgICAgICAgICAgPC9Db250YWluZXI+XG4gICAgICAgICAgICAgICAgPFNlY3Rpb24gc2l6ZT1cImRlZmF1bHRcIiBwYWRkaW5nPlxuICAgICAgICAgICAgICAgICAgICA8Q29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZsZXggYWxpZ25tZW50PVwiY2VudGVyXCIgZGlyZWN0aW9uPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3QgdHlwZT1cImRpdmlkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gSW50ZWdlciBuZWMgb2Rpby4gUHJhZXNlbnQgbGliZXJvLiBTZWQgY3Vyc3VzIGFudGUgZGFwaWJ1cyBkaWFtLiBTZWQgbmlzaS4gTnVsbGEgcXVpcyBzZW0gYXQgbmliaCBlbGVtZW50dW0gaW1wZXJkaWV0LiBEdWlzIHNhZ2l0dGlzIGlwc3VtLiA8Yj5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0PC9iPi4gUHJhZXNlbnQgbWF1cmlzLiBGdXNjZSBuZWMgdGVsbHVzIHNlZCBhdWd1ZSBzZW1wZXIgcG9ydGEuIDxiPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQ8L2I+LiBNYXVyaXMgbWFzc2EuIFZlc3RpYnVsdW0gbGFjaW5pYSBhcmN1IGVnZXQgbnVsbGEuIENsYXNzIGFwdGVudCB0YWNpdGkgc29jaW9zcXUgYWQgbGl0b3JhIHRvcnF1ZW50IHBlciBjb251YmlhIG5vc3RyYSwgcGVyIGluY2VwdG9zIGhpbWVuYWVvcy4gQ3VyYWJpdHVyIHNvZGFsZXMgbGlndWxhIGluIGxpYmVyby4gPGI+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdDwvYj4uIFNlZCBkaWduaXNzaW0gbGFjaW5pYSBudW5jLiA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5DdXJhYml0dXIgdG9ydG9yLiBQZWxsZW50ZXNxdWUgbmliaC4gPGk+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdDwvaT4uIEFlbmVhbiBxdWFtLiBJbiBzY2VsZXJpc3F1ZSBzZW0gYXQgZG9sb3IuIE1hZWNlbmFzIG1hdHRpcy4gU2VkIGNvbnZhbGxpcyB0cmlzdGlxdWUgc2VtLiBQcm9pbiB1dCBsaWd1bGEgdmVsIG51bmMgZWdlc3RhcyBwb3J0dGl0b3IuIE1vcmJpIGxlY3R1cyByaXN1cywgaWFjdWxpcyB2ZWwsIHN1c2NpcGl0IHF1aXMsIGx1Y3R1cyBub24sIG1hc3NhLiBGdXNjZSBhYyB0dXJwaXMgcXVpcyBsaWd1bGEgbGFjaW5pYSBhbGlxdWV0LiA8aT5Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0PC9pPi4gTWF1cmlzIGlwc3VtLiBOdWxsYSBtZXR1cyBtZXR1cywgdWxsYW1jb3JwZXIgdmVsLCB0aW5jaWR1bnQgc2VkLCBldWlzbW9kIGluLCBuaWJoLiA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxpPkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQ8L2k+LiBRdWlzcXVlIHZvbHV0cGF0IGNvbmRpbWVudHVtIHZlbGl0LiA8aT5TZWQgZGlnbmlzc2ltIGxhY2luaWEgbnVuYzwvaT4uIENsYXNzIGFwdGVudCB0YWNpdGkgc29jaW9zcXUgYWQgbGl0b3JhIHRvcnF1ZW50IHBlciBjb251YmlhIG5vc3RyYSwgcGVyIGluY2VwdG9zIGhpbWVuYWVvcy4gTmFtIG5lYyBhbnRlLiBTZWQgbGFjaW5pYSwgdXJuYSBub24gdGluY2lkdW50IG1hdHRpcywgdG9ydG9yIG5lcXVlIGFkaXBpc2NpbmcgZGlhbSwgYSBjdXJzdXMgaXBzdW0gYW50ZSBxdWlzIHR1cnBpcy4gTnVsbGEgZmFjaWxpc2kuIDxiPlByb2luIHV0IGxpZ3VsYSB2ZWwgbnVuYyBlZ2VzdGFzIHBvcnR0aXRvcjwvYj4uIFV0IGZyaW5naWxsYS4gU3VzcGVuZGlzc2UgcG90ZW50aS4gTnVuYyBmZXVnaWF0IG1pIGEgdGVsbHVzIGNvbnNlcXVhdCBpbXBlcmRpZXQuIFZlc3RpYnVsdW0gc2FwaWVuLiBQcm9pbiBxdWFtLiBFdGlhbSB1bHRyaWNlcy4gU3VzcGVuZGlzc2UgaW4ganVzdG8gZXUgbWFnbmEgbHVjdHVzIHN1c2NpcGl0LiBTZWQgbGVjdHVzLiBJbnRlZ2VyIGV1aXNtb2QgbGFjdXMgbHVjdHVzIG1hZ25hLiA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdEl0ZW0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlF1aXNxdWUgY3Vyc3VzLCBtZXR1cyB2aXRhZSBwaGFyZXRyYSBhdWN0b3IsIHNlbSBtYXNzYSBtYXR0aXMgc2VtLCBhdCBpbnRlcmR1bSBtYWduYSBhdWd1ZSBlZ2V0IGRpYW0uIFZlc3RpYnVsdW0gYW50ZSBpcHN1bSBwcmltaXMgaW4gZmF1Y2lidXMgb3JjaSBsdWN0dXMgZXQgdWx0cmljZXMgcG9zdWVyZSBjdWJpbGlhIEN1cmFlOyBNb3JiaSBsYWNpbmlhIG1vbGVzdGllIGR1aS4gUHJhZXNlbnQgYmxhbmRpdCBkb2xvci4gU2VkIG5vbiBxdWFtLiBJbiB2ZWwgbWkgc2l0IGFtZXQgYXVndWUgY29uZ3VlIGVsZW1lbnR1bS4gTW9yYmkgaW4gaXBzdW0gc2l0IGFtZXQgcGVkZSBmYWNpbGlzaXMgbGFvcmVldC4gRG9uZWMgbGFjdXMgbnVuYywgdml2ZXJyYSBuZWMsIGJsYW5kaXQgdmVsLCBlZ2VzdGFzIGV0LCBhdWd1ZS4gVmVzdGlidWx1bSB0aW5jaWR1bnQgbWFsZXN1YWRhIHRlbGx1cy4gVXQgdWx0cmljZXMgdWx0cmljZXMgZW5pbS4gPGI+U3VzcGVuZGlzc2UgaW4ganVzdG8gZXUgbWFnbmEgbHVjdHVzIHN1c2NpcGl0PC9iPi4gQ3VyYWJpdHVyIHNpdCBhbWV0IG1hdXJpcy4gTW9yYmkgaW4gZHVpIHF1aXMgZXN0IHB1bHZpbmFyIHVsbGFtY29ycGVyLiA8Yj5WZXN0aWJ1bHVtIGFudGUgaXBzdW0gcHJpbWlzIGluIGZhdWNpYnVzIG9yY2kgbHVjdHVzIGV0IHVsdHJpY2VzIHBvc3VlcmUgY3ViaWxpYSBDdXJhZTsgTW9yYmkgbGFjaW5pYSBtb2xlc3RpZSBkdWk8L2I+LiBOdWxsYSBmYWNpbGlzaS4gSW50ZWdlciBsYWNpbmlhIHNvbGxpY2l0dWRpbiBtYXNzYS4gPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpc3RJdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTGlzdD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRmxleD5cbiAgICAgICAgICAgICAgICAgICAgPC9Db250YWluZXI+XG4gICAgICAgICAgICAgICAgPC9TZWN0aW9uPlxuICAgICAgICAgICAgPC9GbGV4PlxuICAgICAgICApXG4gICAgfVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZXM2LXByb21pc2UuZC50c1wiIC8+XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBOYXZMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgXCJlczYtcHJvbWlzZS9hdXRvXCI7XG5pbXBvcnQgJ3ByaXNtanMnO1xuaW1wb3J0ICdwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tamF2YXNjcmlwdC5taW4nO1xuaW1wb3J0ICdwcmlzbWpzL2NvbXBvbmVudHMvcHJpc20tanN4Lm1pbic7XG5pbXBvcnQgJ3ByaXNtanMvY29tcG9uZW50cy9wcmlzbS10c3gubWluJztcbmltcG9ydCAncHJpc21qcy9wbHVnaW5zL3Rvb2xiYXIvcHJpc20tdG9vbGJhcic7XG5pbXBvcnQgJ3ByaXNtanMvcGx1Z2lucy9jb3B5LXRvLWNsaXBib2FyZC9wcmlzbS1jb3B5LXRvLWNsaXBib2FyZCc7XG5pbXBvcnQgJ3ByaXNtanMvY29tcG9uZW50cy9wcmlzbS1jc3MubWluJztcbmltcG9ydCB7IFxuICAgIFNlY3Rpb25cbn0gZnJvbSAndWlraXQtcmVhY3QnO1xuaW1wb3J0IHsgQWRtaW5QYWdlIH0gZnJvbSAnLi8uLi8uLi9zcmMva2Fpcm9zL3BhY2thZ2VzL2thaXJvcy1hZG1pbi9wYWdlcy9BZG1pbi9BZG1pblBhZ2UnO1xuaW1wb3J0IHsgSW5kZXhQYWdlIH0gZnJvbSAnLi9JbmRleFBhZ2UnO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIHJlbmRlcihcbiAgICAgICAgPEFwcCAvPixcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxuICAgICk7XG59LCBmYWxzZSk7XG5cbmNsYXNzIEFwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxhbnksIGFueT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGlzTG9hZGluZ1JvdXRlTW9kdWxlczogdHJ1ZSxcbiAgICAgICAgICAgIG1vZHVsZXM6IG51bGwsXG4gICAgICAgICAgICBwYWNrYWdlczogbnVsbCxcbiAgICAgICAgICAgIG1vZHVsZVJvdXRlczogW11cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Um91dGVyPlxuICAgICAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvXCIgY29tcG9uZW50PXtJbmRleFBhZ2V9IC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5pc0xvYWRpbmdSb3V0ZU1vZHVsZXMgPyBcIlwiIDogdGhpcy5yZW5kZXJSb3V0ZXMoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIDwvUm91dGVyPlxuICAgICAgICApXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJSb3V0ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc0xvYWRpbmdSb3V0ZU1vZHVsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLm1vZHVsZVJvdXRlcy5tYXAocm91dGUgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBDb21wb25lbnQgPSByb3V0ZS5jb21wb25lbnQ7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm91dGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiA8Um91dGUgZXhhY3Q9e3JvdXRlLnJvdXRlLmV4YWN0fSBwYXRoPXtyb3V0ZS5yb3V0ZS5wYXRofSBjb21wb25lbnQ9e0NvbXBvbmVudH0gLz5cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNldHVwKCkge1xuICAgICAgICBsZXQgcGFja2FnZXMgPSBhd2FpdCB0aGlzLmZldGNoUGFja2FnZXMoKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhY2thZ2VzJywgSlNPTi5zdHJpbmdpZnkocGFja2FnZXMpKTtcbiAgICAgICAgbGV0IG1vZHVsZXMgPSBbXVxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gcGFja2FnZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IG1LZXkgaW4gcGFja2FnZXNba2V5XVsnbW9kdWxlcyddKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1vZHVsZSA9IGF3YWl0IHRoaXMuZmV0Y2hQYWNrYWdlTW9kdWxlKGtleSwgbUtleSlcbiAgICAgICAgICAgICAgICBtb2R1bGVzLnB1c2goeyBtb2R1bGUsIHBhY2thZ2VOYW1lOiBrZXkgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBhY2thZ2VzOiBwYWNrYWdlcyxcbiAgICAgICAgICAgIG1vZHVsZXM6IG1vZHVsZXMsXG4gICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmltcG9ydFJvdXRlcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmV0Y2hQYWNrYWdlcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCcvYXBpL3BhY2thZ2VzJylcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIH1cblxuICAgIHByaXZhdGUgZmV0Y2hQYWNrYWdlTW9kdWxlKHBhY2thZ2VOYW1lLCBtb2R1bGVOYW1lKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgL2FwaS9wYWNrYWdlcy8ke3BhY2thZ2VOYW1lfS8ke21vZHVsZU5hbWV9YClcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIH1cblxuICAgIHByaXZhdGUgaW1wb3J0Um91dGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBtb2R1bGVzID0gdGhpcy5zdGF0ZS5tb2R1bGVzO1xuICAgICAgICAgICAgbW9kdWxlcy5tYXAoYXN5bmMgKG1vZHVsZSwgbWkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlLm1vZHVsZS5yb3V0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlLm1vZHVsZS5yb3V0ZXMubWFwKGFzeW5jIChyb3V0ZSwgcmkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaW1wb3J0Um91dGVDb21wb25lbnQobW9kdWxlLnBhY2thZ2VOYW1lLCByb3V0ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFttb2R1bGUubW9kdWxlLnJvdXRlcy5sZW5ndGgsIHJpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWkgPT09IG1vZHVsZXMubGVuZ3RoIC0gMSAmJiByaSA9PT0gbW9kdWxlLm1vZHVsZS5yb3V0ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TW9kdWxlTG9hZGluZ1N0YXRlQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFttb2R1bGVzLmxlbmd0aCwgbWldKTtcbiAgICAgICAgICAgICAgICBpZiAobWkgPT09IG1vZHVsZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE1vZHVsZUxvYWRpbmdTdGF0ZUNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldE1vZHVsZUxvYWRpbmdTdGF0ZUNvbXBsZXRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nUm91dGVNb2R1bGVzOiBmYWxzZSB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGltcG9ydFJvdXRlQ29tcG9uZW50KHBhY2thZ2VOYW1lLCByb3V0ZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXNMb2FkaW5nUm91dGVNb2R1bGVzOiB0cnVlIH0pO1xuICAgICAgICBsZXQgeyByb3V0ZUNvbXBvbmVudFJlZ2lzdHJ5IH0gPSBhd2FpdCBpbXBvcnQoYC4vLi4vLi4vc3JjL2thaXJvcy9wYWNrYWdlcy8ke3BhY2thZ2VOYW1lfS9yb3V0ZS1jb21wb25lbnQtcmVnaXN0cnkvcm91dGUtY29tcG9uZW50LXJlZ2lzdHJ5YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHJvdXRlQ29tcG9uZW50UmVnaXN0cnkuQWRtaW5QYWdlKTtcbiAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gcm91dGVDb21wb25lbnRSZWdpc3RyeVtyb3V0ZS5jb21wb25lbnRdO1xuICAgICAgICBjb25zb2xlLmxvZyhDb21wb25lbnQpO1xuICAgICAgICBsZXQgbW9kdWxlUm91dGVzID0gdGhpcy5zdGF0ZS5tb2R1bGVSb3V0ZXM7XG4gICAgICAgIG1vZHVsZVJvdXRlcy5wdXNoKHsgcm91dGUsIGNvbXBvbmVudDogQ29tcG9uZW50IH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbW9kdWxlUm91dGVzIH0pO1xuICAgIH1cbn0iLCJ2YXIgbWFwID0ge1xuXHRcIi4va2Fpcm9zLWFkbWluL3JvdXRlLWNvbXBvbmVudC1yZWdpc3RyeS9yb3V0ZS1jb21wb25lbnQtcmVnaXN0cnlcIjogW1xuXHRcdDQxLFxuXHRcdDAsXG5cdFx0MVxuXHRdXG59O1xuZnVuY3Rpb24gd2VicGFja0FzeW5jQ29udGV4dChyZXEpIHtcblx0dmFyIGlkcyA9IG1hcFtyZXFdO1xuXHRpZighaWRzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH0pO1xuXHR9XG5cdHJldHVybiBQcm9taXNlLmFsbChpZHMuc2xpY2UoMSkubWFwKF9fd2VicGFja19yZXF1aXJlX18uZSkpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGlkID0gaWRzWzBdO1xuXHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcblx0fSk7XG59XG53ZWJwYWNrQXN5bmNDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQXN5bmNDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0FzeW5jQ29udGV4dC5pZCA9IDE3O1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQXN5bmNDb250ZXh0OyJdLCJzb3VyY2VSb290IjoiIn0=